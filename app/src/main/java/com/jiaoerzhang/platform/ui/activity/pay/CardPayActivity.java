package com.jiaoerzhang.platform.ui.activity.pay;import android.support.annotation.NonNull;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.widget.Toast;import com.blankj.utilcode.util.ToastUtils;import com.stripe.android.Stripe;import com.stripe.android.TokenCallback;import com.stripe.android.model.Card;import com.stripe.android.model.PaymentMethod;import com.stripe.android.model.Token;import com.jiaoerzhang.platform.R;import com.jiaoerzhang.platform.common.Constants;import com.jiaoerzhang.platform.lib_core.base.BaseActivity;import static java.security.AccessController.getContext;public class CardPayActivity extends BaseActivity {    private Card card;    @Override    protected void initData() {        Card.Builder builder = new Card.Builder("4514617608539260",10,2019,"123");        card = builder.build();        if (card.validateCard()) {            Stripe stripe = new Stripe(CardPayActivity.this);            //调用创建token方法            stripe.createToken(                    card,//传入card对象                    Constants.RELEASE_KEY,//可发布的密钥                    new TokenCallback() {                        //这里的token打印出来是一串json数据,其中的    token需要用getId()来得到                        public void onSuccess(Token token) {                            System.out.println("token=========="+token.getId());//                            // 这里生成得到了token,你需要将它发送到自己服务器,然后服务器利用这个token和支付金额去向    Stripe请求扣费//                            submitPaymentInfo(token.getId(),"12.20");//提交支付信息                        }                        public void onError(Exception error) {                            // 显示本地错误信息                            Toast.makeText(CardPayActivity.this,                                    error+"",                                    Toast.LENGTH_LONG                            ).show();                        }                    }            );        }else{//卡号有误            ToastUtils.showShort("The card number that you entered is invalid");        }        if (!card.validateExpiryDate()) {//过期时间有误            ToastUtils.showShort("The expiration date that you entered is invalid");        } else if (!card.validateCVC()) {//CVC验证码有误            ToastUtils.showShort("The CVC code that you entered is invalid");        } else {//卡片详情有误            ToastUtils.showShort("The card details that you entered are invalid");        }    }    @Override    protected void initView() {    }    @Override    protected int bindLayoutId() {        return R.layout.activity_card_pay;    }}