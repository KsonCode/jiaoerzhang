package com.jiaoerzhang.platform.ui.activity.albumimport android.os.Bundleimport android.support.v4.app.Fragmentimport com.jiaoerzhang.platform.Rimport com.jiaoerzhang.platform.api.AlbumApiimport com.jiaoerzhang.platform.entity.album.StyleEntityimport com.jiaoerzhang.platform.lib_core.base.BaseActivityimport com.jiaoerzhang.platform.lib_net.network.http.HttpRequestPresenterimport com.jiaoerzhang.platform.lib_net.network.http.ModelCallbackimport com.jiaoerzhang.platform.ui.fragment.album.FragmentContentimport com.jiaoerzhang.platform.ui.fragment.album.MyFrPagerAdapterimport com.jiaoerzhang.platform.ui.fragment.album.OrdinarytContentimport com.jiaoerzhang.platform.widget.LoadingDialogimport kotlinx.android.synthetic.main.activity_ordinary_album.*import kotlinx.android.synthetic.main.fragment_album_layout.pagerimport kotlinx.android.synthetic.main.fragment_album_layout.tabsclass OrdinaryAlbumActivity : BaseActivity() {    private var TITLES: MutableList<StyleEntity.Content>? = ArrayList<StyleEntity.Content>()    override fun initData() {        HttpRequestPresenter.getInstance().get(                AlbumApi.ALBUM_STYLE_URL,                HashMap<String, String>(),                object : ModelCallback<StyleEntity>(StyleEntity::class.java) {                    override fun onSuccess(t: StyleEntity?) {                        TITLES = t!!.content                        var content: StyleEntity.Content = StyleEntity.Content("", 1, 1, "all")                        TITLES!!.add(0, content)                        val fragments: MutableList<Fragment> = ArrayList()                        var tls: MutableList<String> = arrayListOf()                        for (s in TITLES!!) {                            val bundle = Bundle()                            bundle.putString("name", s.name)                            bundle.putString("code", s.code)                            tls.add(s.name)                            fragments.add(OrdinarytContent.getInstance(bundle))                        }                        pager.adapter = MyFrPagerAdapter(getSupportFragmentManager(), tls as java.util.ArrayList<String>?, fragments)                        tabs.setViewPager(pager)                        pager.currentItem = 0                    }                    override fun onSuccessMsg(status: String?, message: String?) {                    }                    override fun onErrorMsg(code: Int, msg: String?) {                    }                })    }    override fun initView() {        bar_back.setOnClickListener { this.finish() }    }    override fun bindLayoutId(): Int {        return R.layout.activity_ordinary_album    }}