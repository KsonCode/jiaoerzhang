package com.jiaoerzhang.platform.widget;import android.animation.ObjectAnimator;import android.app.Dialog;import android.content.Context;import android.content.DialogInterface;import android.os.Bundle;import android.support.v4.content.ContextCompat;import android.support.v7.widget.CardView;import android.text.TextUtils;import android.view.Display;import android.view.View;import android.view.WindowManager;import android.widget.RelativeLayout;import android.widget.TextView;import com.blankj.utilcode.util.ScreenUtils;import com.jiaoerzhang.platform.R;public class PayDialog extends Dialog implements View.OnClickListener {    public TextView balanceTv;    public TextView albumPaymentTv;    public TextView singlePaymentTv;    public TextView confirmTv;    private TextView cancelTv;    public boolean isAlbum = true;    private RelativeLayout albumLayout;    private RelativeLayout singleLayout;    private TextView albumTXT, singleTXT;    public TextView notEnough;    private Context mContext;    private OnCloseListener listener;    private CardView card_layout;    public void setListener(OnCloseListener listener) {        this.listener = listener;    }    public PayDialog(Context context) {        super(context);        this.mContext = context;    }    public PayDialog(Context context, String content) {        super(context, R.style.dialog);        this.mContext = context;    }    public PayDialog(Context context, int themeResId, String content) {        super(context, themeResId);        this.mContext = context;    }    public PayDialog(Context context, int themeResId, String content, OnCloseListener listener) {        super(context, themeResId);        this.mContext = context;        this.listener = listener;    }    protected PayDialog(Context context, boolean cancelable, OnCancelListener cancelListener) {        super(context, cancelable, cancelListener);        this.mContext = context;    }    public PayDialog setTitle(String title) {        return this;    }    public PayDialog setPositiveButton(String name) {        return this;    }    public PayDialog setNegativeButton(String name) {        return this;    }    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.dialog_pay);        setCanceledOnTouchOutside(false);        initView();    }    private void initView() {        card_layout = findViewById(R.id.card_layout);//        ObjectAnimator objectAnimator = ObjectAnimator.ofFloat(card_layout,"alpha",0f,1f);//        objectAnimator.setDuration(1000);//        objectAnimator.start();        balanceTv = (TextView) findViewById(R.id.coin_balance);        albumPaymentTv = (TextView) findViewById(R.id.album_payment_count);        singlePaymentTv = (TextView) findViewById(R.id.single_album_count);        cancelTv = (TextView) findViewById(R.id.cancel);        cancelTv.setOnClickListener(this);        confirmTv = (TextView) findViewById(R.id.confirm);        confirmTv.setOnClickListener(this);        albumLayout = findViewById(R.id.album_layout);        singleLayout = findViewById(R.id.single_layout);        albumTXT = findViewById(R.id.album_txt);        singleTXT = findViewById(R.id.single_txt);        notEnough = findViewById(R.id.not_enough);        notEnough.setVisibility(View.GONE);        albumLayout.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                isAlbum = true;                albumLayout.setBackgroundResource(R.drawable.pay_red_bg);                albumPaymentTv.setTextColor(ContextCompat.getColor(mContext, R.color.common_red_txt_color));                albumTXT.setTextColor(ContextCompat.getColor(mContext, R.color.common_red_txt_color));                singleLayout.setBackgroundResource(R.drawable.pay_gray_bg);                singlePaymentTv.setTextColor(ContextCompat.getColor(mContext, R.color.common_hint_txt_color));                singleTXT.setTextColor(ContextCompat.getColor(mContext, R.color.common_hint_txt_color));            }        });        singleLayout.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                isAlbum = false;                singleLayout.setBackgroundResource(R.drawable.pay_red_bg);                singlePaymentTv.setTextColor(ContextCompat.getColor(mContext, R.color.common_red_txt_color));                singleTXT.setTextColor(ContextCompat.getColor(mContext, R.color.common_red_txt_color));                albumLayout.setBackgroundResource(R.drawable.pay_gray_bg);                albumPaymentTv.setTextColor(ContextCompat.getColor(mContext, R.color.common_hint_txt_color));                albumTXT.setTextColor(ContextCompat.getColor(mContext, R.color.common_hint_txt_color));            }        });        getWindow().setBackgroundDrawableResource(android.R.color.transparent);        android.view.WindowManager.LayoutParams p = getWindow().getAttributes();  //获取对话框当前的参数值//        p.height = (int) (ScreenUtils.getScreenHeight() * 0.3);   //高度设置为屏幕的0.3        p.width = (int) (ScreenUtils.getScreenWidth() * 0.8);    //宽度设置为屏幕的0.5        getWindow().setAttributes(p);     //设置生效    }    @Override    public void onClick(View v) {        switch (v.getId()) {            case R.id.cancel:                if (listener != null) {                    listener.onClick(this, false);                }                break;            case R.id.confirm:                if (listener != null) {                    listener.onClick(this, true);                }                break;        }    }    public interface OnCloseListener {        void onClick(Dialog dialog, boolean confirm);    }}